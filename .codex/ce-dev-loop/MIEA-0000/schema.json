{
	"type": "object",
	"properties": {
		"status": { "type": "string", "enum": ["continue", "done", "needs_user"] },
		"p1_count": { "type": "integer", "minimum": 0 },
		"p2_count": { "type": "integer", "minimum": 0 },
		"p3_count": { "type": "integer", "minimum": 0 },

		"issues": {
			"type": "array",
			"items": {
				"type": "object",
				"properties": {
					"id": { "type": "string" },
					"priority": { "type": "string", "enum": ["P1", "P2", "P3"] },
					"title": { "type": "string" },
					"file": { "type": "string" },
					"line_range": { "type": "string" },
					"evidence": { "type": "string" },
					"recommendation": { "type": "string" }
				},
				"required": [
					"id",
					"priority",
					"title",
					"file",
					"line_range",
					"evidence",
					"recommendation"
				],
				"additionalProperties": false
			}
		},

		"closed": { "type": "array", "items": { "type": "string" } },

		"plan_summary": { "type": "string" },
		"work_summary": { "type": "string" },
		"review_summary": { "type": "string" },

		"verification_commands": { "type": "array", "items": { "type": "string" } },
		"verification_results": { "type": "array", "items": { "type": "string" } },

		"questions": {
			"type": "array",
			"items": { "type": "string" },
			"maxItems": 3
		},
		"info": { "type": "array", "items": { "type": "string" } },
		"notes": { "type": "string" }
	},
	"required": [
		"status",
		"p1_count",
		"p2_count",
		"p3_count",
		"issues",
		"closed",
		"plan_summary",
		"work_summary",
		"review_summary",
		"verification_commands",
		"verification_results",
		"questions",
		"info",
		"notes"
	],
	"additionalProperties": false
}
